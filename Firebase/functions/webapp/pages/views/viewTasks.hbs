<!DOCTYPE html>
<html lang="en">
<head>
  <title>Your Tasks - Homework Tracker</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="bootstrap-4.6.0-dist/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
  <script src="bootstrap-4.6.0-dist/js/bootstrap.min.js"></script>

  <!--NAV LINKS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="scripts/navToggle.js"></script>
  <link rel="stylesheet" href="stylesheets/style.css">

  <link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png">
  <link rel="manifest" href="images/favicon/site.webmanifest">
</head>
<body>
<div class="topnav" id="myTopnav">

    <a class="active" id="HT" href="/"><img src="images\favicon\android-chrome-192x192.png" alt="HomeworkTracker" width="41"> Home</a>
    <!-- Navigation links (hidden by default) -->
    <a href="/viewTasks">View Tasks</a>
    <a href="/addTask">Add a Task</a>
    <a href="/addTag">Add a Tag</a>
    <a href="/freetime">FreeTime</a>
    <a href="/account">View Account Details</a>
    <!-- "Hamburger menu" / "Bar icon" to toggle the navigation links -->
    <a href="javascript:void(0);" class="icon" onclick="navToggle()">
        <i class="fa fa-bars"></i>
    </a>
</div>
<div class="container">
    <div class="row">
        <div class="col">
            <h1 class="sectionHeader">Your Tasks</h1>
        </div>
    </div>

{{#if section.[0]}}
    <div class="row">
        <div class="col-12 text-center"><span class="text-center sortingRow">Sorting By:</span>
            <div class="dropdown d-inline dropdownSpacing" ><a class="btn sortingBtn btn-lg dropdown-toggle d-inline" aria-expanded="false" data-toggle="dropdown" role="button">{{sort}}</a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="/viewTasks?sort=Due%20Date">Due Date</a>
                    <a class="dropdown-item" href="/viewTasks?sort=Priority">Priority</a>
                    <a class="dropdown-item" href="/viewTasks?sort=Tag">Tag</a> <!--SORTING OPTIONS HERE-->
                </div>
            </div><button onclick="window.location.href='addTask'" class="btn addTaskBtn" type="button" >Add Task<strong>+</strong></button>
        </div>
    </div>
{{#each section}}

            <h1 class="sectionHeader">{{this.title}}</h1> <!-- LIKE "DUE TODAY" FOR EXAMPLE-->
            <div class="progress progressBarBackground">    <!-- WE CAN WORRY ABOUT PROGRESS BAR IMPLEMENTATION LATER. MAYBE WHEN WE FINISH THE DISPLAY MILESTONE -->
                <div class="progress-bar progressBarColor" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width: {{this.completionPercent}}%;"><span class="sr-only">{{this.completionPercent}}%</span></div> <!--CHANGE WIDTH STYLING TO PORTRAY PROGRESS-->
            </div>

    <div class="row">
{{#each this.task}}  
        <div class="col-md-3">
            <div class="card">
                <div class="card-body" style="background:{{this.color}};"><!--Grab Color From TASK-->
                <a href="{{this.editLink}}">
                    <h4 class="card-title">{{this.name}}</h4>
                    <h6 class="card-subtitle mb-2">{{this.tagName}}</h6>
                    <p class="card-text description">{{this.description}}</p>
                    <p class="card-text dueDate">Due Date: {{this.due_date}}</p>
                    <span class="badge badge-danger">{{this.priority}}</span>
                    <span class="badge badge-light timeBadge">{{this.est_time}}</span> <!--ESTIMATED TIME TO COMPLETION GOES HERE -->
                </a>
                </div>
            </div>
        </div>
{{/each}}
    </div>
{{/each}}
{{else}}
    <div class="row">
        <div class="col-md-12" style="background: rgba(140,41,41,0);">
            <h1 class="sectionHeader">You have no upcoming tasks!</h1>
        </div>
    </div>
{{/if}}
<br><br>
</body>
</html>